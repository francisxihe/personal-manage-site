import{F as c,X as d,r as D,j as e,I as x,B as y}from"./index.295caa00.js";import"./index.768e466f.js";import{D as v}from"./index.88ba4d8f.js";import{z as s}from"./index.4b61ae15.js";import{useExpenses as j}from"./expenses-context.9672601c.js";import{D as E}from"./index.98f7498f.js";import{T as V}from"./TagInput.a27bce1c.js";import"./pad.b909f4f4.js";import"./b-tween.es.d368a2a1.js";import"./index.75d02bbe.js";import"./x.aabcad2e.js";var r="/Users/xuwenhua/code/project/home-manage/src/pages/expenses/components/transaction-form.tsx";const l=c.Item,u=d.Option,n=s.object({type:s.enum(["income","expense"]),amount:s.string().refine(i=>!isNaN(Number(i))&&Number(i)>0,{message:"Amount must be a positive number"}),description:s.string().min(1,{message:"Description is required"}),category:s.string().min(1,{message:"Category is required"}),tags:s.array(s.string()),date:s.string().refine(i=>!isNaN(Date.parse(i)),{message:"Please enter a valid date"}),recurring:s.object({frequency:s.enum(["daily","weekly","monthly","yearly"]),interval:s.number()}).optional()});function _(){const{addTransaction:i}=j(),[m,p]=D.exports.useState({type:"expense",amount:"",description:"",category:"",tags:[],date:new Date().toISOString().split("T")[0]}),[h]=c.useForm();function g(t){i({...t,amount:Number(t.amount),date:new Date(t.date)}),p({type:"expense",amount:"",description:"",category:"",tags:[],date:new Date().toISOString().split("T")[0]})}const o=(t,a)=>[{validator:async(N,f)=>{console.log({[a]:N});const b=t.shape[a].safeParse(N);if(!b.success){f(b.error.errors[0].message);return}f()},validateTrigger:"onBlur"}];return e.exports.jsxDEV(c,{form:h,layout:"vertical",onSubmit:g,initialValues:m,children:[e.exports.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.exports.jsxDEV(l,{label:"Type",rules:o(n,"type"),field:"type",children:e.exports.jsxDEV(d,{placeholder:"Select type",defaultValue:"expense",children:[e.exports.jsxDEV(u,{value:"income",children:"Income"},void 0,!1,{fileName:r,lineNumber:102,columnNumber:13},this),e.exports.jsxDEV(u,{value:"expense",children:"Expense"},void 0,!1,{fileName:r,lineNumber:103,columnNumber:13},this)]},void 0,!0,{fileName:r,lineNumber:101,columnNumber:11},this)},void 0,!1,{fileName:r,lineNumber:96,columnNumber:9},this),e.exports.jsxDEV(l,{label:"Amount",rules:o(n,"amount"),field:"amount",children:e.exports.jsxDEV(x,{type:"number",step:"0.01",placeholder:"Enter amount"},void 0,!1,{fileName:r,lineNumber:112,columnNumber:11},this)},void 0,!1,{fileName:r,lineNumber:107,columnNumber:9},this)]},void 0,!0,{fileName:r,lineNumber:95,columnNumber:7},this),e.exports.jsxDEV(l,{label:"Description",rules:o(n,"description"),field:"description",children:e.exports.jsxDEV(x,{placeholder:"Enter description"},void 0,!1,{fileName:r,lineNumber:121,columnNumber:9},this)},void 0,!1,{fileName:r,lineNumber:116,columnNumber:7},this),e.exports.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.exports.jsxDEV(l,{label:"Category",rules:o(n,"category"),field:"category",children:e.exports.jsxDEV(d,{placeholder:"Select category",children:Object.entries(E).filter(([t,a])=>a.type===m.type).map(([t,a])=>e.exports.jsxDEV(u,{value:t,children:a.name},t,!1,{fileName:r,lineNumber:134,columnNumber:17},this))},void 0,!1,{fileName:r,lineNumber:130,columnNumber:11},this)},void 0,!1,{fileName:r,lineNumber:125,columnNumber:9},this),e.exports.jsxDEV(l,{label:"Date",rules:o(n,"date"),field:"date",children:e.exports.jsxDEV(v,{allowClear:!0,showTime:!0},void 0,!1,{fileName:r,lineNumber:146,columnNumber:11},this)},void 0,!1,{fileName:r,lineNumber:141,columnNumber:9},this)]},void 0,!0,{fileName:r,lineNumber:124,columnNumber:7},this),e.exports.jsxDEV(l,{label:"Tags",rules:o(n,"tags"),field:"tags",children:e.exports.jsxDEV(V,{value:m.tags,onChange:t=>p({...m,tags:t}),placeholder:"Add tags..."},void 0,!1,{fileName:r,lineNumber:155,columnNumber:9},this)},void 0,!1,{fileName:r,lineNumber:150,columnNumber:7},this),e.exports.jsxDEV(y,{type:"primary",htmlType:"submit",children:"Add Transaction"},void 0,!1,{fileName:r,lineNumber:162,columnNumber:7},this)]},void 0,!0,{fileName:r,lineNumber:89,columnNumber:5},this)}export{_ as TransactionForm};
