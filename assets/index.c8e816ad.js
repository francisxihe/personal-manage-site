import{r as i,j as t,aG as w,a4 as x,bb as L}from"./index.295caa00.js";import{C as n}from"./index.8dc5884a.js";import{F as c,T as u}from"./index.6dcfb420.js";import{A as V}from"./index.43e76df7.js";import S from"./index.51bf1366.js";import{T as r}from"./api.b8516001.js";import"./IconSelector.c2144de5.js";import"./startOfDay.a6eae802.js";import"./index.768e466f.js";import"./pad.b909f4f4.js";import"./b-tween.es.d368a2a1.js";import"./radio.d5ff39d6.js";import"./index.75d02bbe.js";import"./context.b0281150.js";var C={"custom-collapse":"_custom-collapse_10ees_1"},o="/Users/xuwenhua/code/project/home-manage/src/pages/todo/todo-today/index.tsx";const Y=x().format("YYYY-MM-DD"),p=x().add(1,"day").format("YYYY-MM-DD"),f=x().subtract(1,"day").format("YYYY-MM-DD");function H(){const[N,D]=i.exports.useState([]),[b,v]=i.exports.useState([]),[h,E]=i.exports.useState([]),[y,g]=i.exports.useState([]);async function s(){const e=await r.getTodoList({status:"todo",planDateStart:f,planDateEnd:p});D(e);const d=await r.getTodoList({status:"done",doneDateStart:f,doneDateEnd:p});v(d);const m=await r.getTodoList({status:"todo",planDateEnd:Y});E(m);const j=await r.getTodoList({status:"abandoned",abandonedDateStart:f,abandonedDateEnd:p});g(j),l&&a(l)}i.exports.useEffect(()=>{s()},[]);const[l,T]=i.exports.useState(null);async function a(e){L.exports.flushSync(()=>{T(null)}),T(e)}return t.exports.jsxDEV(c,{className:"bg-bg-2 rounded-lg w-full h-full",children:[t.exports.jsxDEV(c.Fixed,{className:"px-5 py-2 flex justify-between items-center border-b",children:t.exports.jsxDEV("div",{className:"text-text-1 text-title-2 font-[500] py-1",children:"\u4ECA\u65E5\u5F85\u529E"},void 0,!1,{fileName:o,lineNumber:74,columnNumber:9},this)},void 0,!1,{fileName:o,lineNumber:73,columnNumber:7},this),t.exports.jsxDEV(c.Shrink,{className:"px-5 w-full h-full flex",children:[t.exports.jsxDEV("div",{className:"w-full py-2",children:[t.exports.jsxDEV(V,{onSubmit:async e=>{var d,m;await r.addTodo({name:e.name,importance:e.importance,urgency:e.urgency,planDate:e.planDate||void 0,planStartAt:((d=e.planTimeRange)==null?void 0:d[0])||void 0,planEndAt:((m=e.planTimeRange)==null?void 0:m[1])||void 0,recurring:e.recurring,tags:e.tags}),s()}},void 0,!1,{fileName:o,lineNumber:79,columnNumber:11},this),t.exports.jsxDEV(n,{defaultActiveKey:["expired","today"],className:`${C["custom-collapse"]} mt-2`,bordered:!1,children:[h.length>0&&t.exports.jsxDEV(n.Item,{header:"\u5DF2\u8FC7\u671F",name:"expired",contentStyle:{padding:0},children:t.exports.jsxDEV(u,{todoList:h,onClickTodo:async e=>{await a(e)},refreshTodoList:async()=>{await s()}},void 0,!1,{fileName:o,lineNumber:105,columnNumber:17},this)},void 0,!1,{fileName:o,lineNumber:100,columnNumber:15},this),N.length>0&&t.exports.jsxDEV(n.Item,{header:"\u4ECA\u5929",name:"today",contentStyle:{padding:0},children:t.exports.jsxDEV(u,{todoList:N,onClickTodo:async e=>{await a(e)},refreshTodoList:async()=>{await s()}},void 0,!1,{fileName:o,lineNumber:122,columnNumber:17},this)},void 0,!1,{fileName:o,lineNumber:117,columnNumber:15},this),b.length>0&&t.exports.jsxDEV(n.Item,{header:"\u5DF2\u5B8C\u6210",name:"done",contentStyle:{padding:0},children:t.exports.jsxDEV(u,{todoList:b,onClickTodo:async e=>{await a(e)},refreshTodoList:async()=>{await s()}},void 0,!1,{fileName:o,lineNumber:139,columnNumber:17},this)},void 0,!1,{fileName:o,lineNumber:134,columnNumber:15},this),y.length>0&&t.exports.jsxDEV(n.Item,{header:"\u5DF2\u653E\u5F03",name:"abandoned",contentStyle:{padding:0},children:t.exports.jsxDEV(u,{todoList:y,onClickTodo:async e=>{await a(e)},refreshTodoList:async()=>{await s()}},void 0,!1,{fileName:o,lineNumber:156,columnNumber:17},this)},void 0,!1,{fileName:o,lineNumber:151,columnNumber:15},this)]},void 0,!0,{fileName:o,lineNumber:94,columnNumber:11},this)]},void 0,!0,{fileName:o,lineNumber:78,columnNumber:9},this),l&&t.exports.jsxDEV(t.exports.Fragment,{children:[t.exports.jsxDEV(w,{type:"vertical",className:"!h-full"},void 0,!1,{fileName:o,lineNumber:171,columnNumber:13},this)," ",t.exports.jsxDEV("div",{className:"w-full py-2",children:t.exports.jsxDEV(S,{todo:l,onClose:async()=>{a(null)},onChange:async e=>{s()}},void 0,!1,{fileName:o,lineNumber:173,columnNumber:15},this)},void 0,!1,{fileName:o,lineNumber:172,columnNumber:13},this)]},void 0,!0)]},void 0,!0,{fileName:o,lineNumber:77,columnNumber:7},this)]},void 0,!0,{fileName:o,lineNumber:72,columnNumber:5},this)}export{H as default};
