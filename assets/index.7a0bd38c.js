import{j as e,r as g,a4 as l,ba as b,B as h,a6 as E,a5 as y}from"./index.295caa00.js";import{A as V,C}from"./index.43e76df7.js";import{useCalendarContext as f,CalendarProvider as w}from"./context.1c78fbdc.js";import{c as S,X as Y}from"./x.aabcad2e.js";import T from"./index.51bf1366.js";import{o as D}from"./OpenModal.e0b23f17.js";import{T as j}from"./api.b8516001.js";/* empty css              */import{k,l as $,w as A,A as M,n as R,Q as F}from"./pad.b909f4f4.js";import{F as v}from"./index.6dcfb420.js";import{R as _}from"./radio.d5ff39d6.js";import"./IconSelector.c2144de5.js";import"./index.768e466f.js";import"./b-tween.es.d368a2a1.js";import"./index.75d02bbe.js";import"./createInjectState.49530c1b.js";import"./context.b0281150.js";import"./startOfDay.a6eae802.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=S("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var p="/Users/xuwenhua/code/project/home-manage/src/pages/todo/todo-calendar/SearchBar.tsx";function L(){const{searchQuery:a,setSearchQuery:s}=f();return e.exports.jsxDEV("div",{className:"px-6 py-3 border-b border-gray-100",children:e.exports.jsxDEV("div",{className:"relative",children:[e.exports.jsxDEV(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"},void 0,!1,{fileName:p,lineNumber:10,columnNumber:9},this),e.exports.jsxDEV("input",{type:"text",value:a,onChange:t=>s(t.target.value),placeholder:"Search events...",className:"w-full pl-10 pr-10 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:p,lineNumber:11,columnNumber:9},this),a&&e.exports.jsxDEV("button",{onClick:()=>s(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.exports.jsxDEV(Y,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"},void 0,!1,{fileName:p,lineNumber:23,columnNumber:13},this)},void 0,!1,{fileName:p,lineNumber:19,columnNumber:11},this)]},void 0,!0,{fileName:p,lineNumber:9,columnNumber:7},this)},void 0,!1,{fileName:p,lineNumber:8,columnNumber:5},this)}var n="/Users/xuwenhua/code/project/home-manage/src/pages/todo/todo-calendar/CalendarCell.tsx";function P({todo:a}){const{getTodoList:s}=f();return e.exports.jsxDEV("div",{onClick:t=>{t.stopPropagation(),D({title:e.exports.jsxDEV("div",{className:"text-body-3",children:"\u7F16\u8F91"},void 0,!1,{fileName:n,lineNumber:18,columnNumber:18},this),content:e.exports.jsxDEV("div",{className:"ml-[-6px]",children:e.exports.jsxDEV(T,{todo:a,onClose:null,onChange:async()=>{console.log("onChange")}},void 0,!1,{fileName:n,lineNumber:21,columnNumber:15},this)},void 0,!1,{fileName:n,lineNumber:20,columnNumber:13},this),onCancel:()=>{s()}})},className:`min-w-[200px] text-body-1 px-1.5 leading-[20px] rounded-[2px] truncate cursor-pointer ${a.status==="done"?"text-success bg-success-light hover:bg-success-light-hover active:bg-success-light-active":""} ${a.status==="todo"?"text-warning bg-warning-light hover:bg-warning-light-hover active:bg-warning-light-active":""}`,children:a.name},void 0,!1,{fileName:n,lineNumber:14,columnNumber:5},this)}function U({cellDate:a}){const{todoList:s,calendarMode:t,pageShowDate:m,getTodoList:u}=f(),o=g.exports.useMemo(()=>s.filter(r=>l(r.planDate).isSame(a,"day")),[a,s]),c=g.exports.useRef();return e.exports.jsxDEV("div",{className:"!text-body-3 h-full",children:e.exports.jsxDEV("div",{className:`p-1 h-full cursor-pointer ${a.isBefore(m,"month")||a.isAfter(m,"month")?"opacity-50":""}`,onDoubleClick:()=>{D({title:e.exports.jsxDEV("div",{className:"text-title",children:"\u6DFB\u52A0\u5F85\u529E"},void 0,!1,{fileName:n,lineNumber:75,columnNumber:20},this),content:e.exports.jsxDEV(V,{initialFormData:{planDate:a.format("YYYY-MM-DD")},onChange:r=>{c.current=r},onSubmit:async r=>{var x,N;await j.addTodo({name:r.name,importance:r.importance,urgency:r.urgency,planDate:r.planDate||void 0,planStartAt:((x=r.planTimeRange)==null?void 0:x[0])||void 0,planEndAt:((N=r.planTimeRange)==null?void 0:N[1])||void 0,recurring:r.recurring,tags:r.tags}),u()}},void 0,!1,{fileName:n,lineNumber:77,columnNumber:15},this),onOk:async()=>{var x,N;const r=c.current;await j.addTodo({name:r.name,importance:r.importance,urgency:r.urgency,planDate:r.planDate||void 0,planStartAt:((x=r.planTimeRange)==null?void 0:x[0])||void 0,planEndAt:((N=r.planTimeRange)==null?void 0:N[1])||void 0,recurring:r.recurring,tags:r.tags}),u()}})},children:[e.exports.jsxDEV("div",{className:"leading-[24px]",children:a.date()},void 0,!1,{fileName:n,lineNumber:116,columnNumber:9},this),t==="month"&&e.exports.jsxDEV(e.exports.Fragment,{children:e.exports.jsxDEV("div",{className:"mt-1 flex flex-col gap-0.5",children:o.map(r=>e.exports.jsxDEV(P,{todo:r},r.id,!1,{fileName:n,lineNumber:121,columnNumber:17},this))},void 0,!1,{fileName:n,lineNumber:119,columnNumber:13},this)},void 0,!1)]},void 0,!0,{fileName:n,lineNumber:66,columnNumber:7},this)},void 0,!1,{fileName:n,lineNumber:65,columnNumber:5},this)}const I=l()._isAMomentObject;I&&(l.extend=()=>{});const O=(a,s,t)=>{t=function(o,c){if(b.exports.isDayjs(o))return o.clone();const r=typeof c=="object"?c:{};return r.date=o,r.args=arguments,new s(r)};const m=s.prototype,u=m.$utils;m.$utils=function(){const o=u();return o.i=b.exports.isDayjs,o},t.isDayjs=b.exports.isDayjs};l.extend(O);l.extend(k);l.extend($);l.extend(A);l.extend(M);l.extend(R);l.extend(F);const Q=l;var i="/Users/xuwenhua/code/project/home-manage/src/pages/todo/todo-calendar/CalendarHeader.tsx";const G=h.Group;function q(a){const{prefixCls:s}=a,{move:t,pageShowDate:m,changePageShowDate:u,calendarMode:o,setCalendarMode:c}=f();return e.exports.jsxDEV(v,{direction:"vertical",className:"px-5 py-4",children:[e.exports.jsxDEV(v.Shrink,{className:"flex items-center",children:e.exports.jsxDEV("div",{className:`${s}-header-value`,children:o==="year"?m.format("YYYY\u5E74"):m.format("YYYY\u5E74MM\u6708")},void 0,!1,{fileName:i,lineNumber:29,columnNumber:9},this)},void 0,!1,{fileName:i,lineNumber:28,columnNumber:7},this),e.exports.jsxDEV(v.Fixed,{className:"flex items-center gap-4",children:[e.exports.jsxDEV(_.Group,{type:"button",options:[{label:"\u5E74",value:"year"},{label:"\u6708",value:"month"}],onChange:c,value:o},void 0,!1,{fileName:i,lineNumber:37,columnNumber:9},this),e.exports.jsxDEV(G,{children:[e.exports.jsxDEV(h,{className:"",onClick:()=>u("prev",o),children:e.exports.jsxDEV(E,{},void 0,!1,{fileName:i,lineNumber:57,columnNumber:14},this)},void 0,!1,{fileName:i,lineNumber:53,columnNumber:11},this),e.exports.jsxDEV(h,{className:`${s}-footer-btn-wrapper`,onClick:()=>t(Q()),children:"\u4ECA\u5929"},void 0,!1,{fileName:i,lineNumber:59,columnNumber:11},this),e.exports.jsxDEV(h,{onClick:()=>u("next",o),children:e.exports.jsxDEV(y,{},void 0,!1,{fileName:i,lineNumber:66,columnNumber:14},this)},void 0,!1,{fileName:i,lineNumber:65,columnNumber:11},this)]},void 0,!0,{fileName:i,lineNumber:52,columnNumber:9},this)]},void 0,!0,{fileName:i,lineNumber:36,columnNumber:7},this)]},void 0,!0,{fileName:i,lineNumber:27,columnNumber:5},this)}var H={"custom-calendar":"_custom-calendar_4es06_1"},d="/Users/xuwenhua/code/project/home-manage/src/pages/todo/todo-calendar/index.tsx";function X(){const{pageShowDate:a,calendarMode:s}=f();return e.exports.jsxDEV("div",{className:"bg-bg-2 rounded-lg w-full max-h-full",children:[e.exports.jsxDEV(L,{},void 0,!1,{fileName:d,lineNumber:14,columnNumber:7},this),e.exports.jsxDEV(C,{className:`${H["custom-calendar"]}`,pageShowDate:a,mode:s,dateRender:t=>e.exports.jsxDEV(U,{cellDate:t},void 0,!1,{fileName:d,lineNumber:19,columnNumber:31},this),headerRender:()=>e.exports.jsxDEV(q,{prefixCls:"arco-calendar"},void 0,!1,{fileName:d,lineNumber:21,columnNumber:11},this)},void 0,!1,{fileName:d,lineNumber:15,columnNumber:7},this)]},void 0,!0,{fileName:d,lineNumber:13,columnNumber:5},this)}function pe(){return e.exports.jsxDEV(w,{children:e.exports.jsxDEV(X,{},void 0,!1,{fileName:d,lineNumber:43,columnNumber:7},this)},void 0,!1,{fileName:d,lineNumber:42,columnNumber:5},this)}export{pe as default};
