import{F as h,X as c,r as d,j as r,B as n,I as E,S as g}from"./index.295caa00.js";import{P as y}from"./index.a0dd74e8.js";import{C as p}from"./index.d0e2df9e.js";import{o as V,s as x,e as B}from"./index.4b61ae15.js";import{useExpenses as S}from"./expenses-context.9672601c.js";import{D as b,B as C}from"./index.98f7498f.js";var t="/Users/xuwenhua/code/project/home-manage/src/pages/expenses/components/budget-overview.tsx";const u=h.Item,f=c.Option,F=V({category:x().min(1,{message:"Category is required"}),amount:x().refine(i=>!isNaN(Number(i))&&Number(i)>0,{message:"Amount must be a positive number"}),period:B(["monthly","yearly"])});function P({showForm:i=!1}){const{budgets:j,addBudget:v}=S(),[N,o]=d.exports.useState(i),[l,m]=d.exports.useState({});function D(e){v({category:e.category,period:e.period,amount:Number(e.amount),startDate:new Date}),m({...F.parse({}),category:"",amount:"",period:"monthly"}),o(!1)}return r.exports.jsxDEV("div",{className:"space-y-4",children:[r.exports.jsxDEV("div",{className:"flex justify-between items-center",children:[r.exports.jsxDEV("h2",{className:"text-2xl font-bold",children:"Budgets"},void 0,!1,{fileName:t,lineNumber:49,columnNumber:9},this),!N&&r.exports.jsxDEV(n,{type:"primary",onClick:()=>o(!0),children:"Add Budget"},void 0,!1,{fileName:t,lineNumber:51,columnNumber:11},this)]},void 0,!0,{fileName:t,lineNumber:48,columnNumber:7},this),N&&r.exports.jsxDEV(p,{title:"New Budget",children:r.exports.jsxDEV(h,{layout:"vertical",onSubmit:D,children:[r.exports.jsxDEV(u,{label:"Category",required:!0,children:r.exports.jsxDEV(c,{placeholder:"Select category",onChange:e=>m({...l,category:e}),children:Object.entries(b).filter(([e,s])=>s.type==="expense").map(([e,s])=>r.exports.jsxDEV(f,{value:e,children:s.name},e,!1,{fileName:t,lineNumber:68,columnNumber:21},this))},void 0,!1,{fileName:t,lineNumber:61,columnNumber:15},this)},void 0,!1,{fileName:t,lineNumber:60,columnNumber:13},this),r.exports.jsxDEV(u,{label:"Amount",required:!0,children:r.exports.jsxDEV(E,{type:"number",step:"0.01",placeholder:"Enter amount",onChange:e=>m({...l,amount:e})},void 0,!1,{fileName:t,lineNumber:76,columnNumber:15},this)},void 0,!1,{fileName:t,lineNumber:75,columnNumber:13},this),r.exports.jsxDEV(u,{label:"Period",required:!0,children:r.exports.jsxDEV(c,{placeholder:"Select period",onChange:e=>m({...l,period:e}),children:Object.entries(C).map(([e,s])=>r.exports.jsxDEV(f,{value:e,children:s},e,!1,{fileName:t,lineNumber:90,columnNumber:19},this))},void 0,!1,{fileName:t,lineNumber:85,columnNumber:15},this)},void 0,!1,{fileName:t,lineNumber:84,columnNumber:13},this),r.exports.jsxDEV(g,{children:[r.exports.jsxDEV(n,{type:"primary",htmlType:"submit",children:"Add Budget"},void 0,!1,{fileName:t,lineNumber:96,columnNumber:15},this),r.exports.jsxDEV(n,{onClick:()=>o(!1),children:"Cancel"},void 0,!1,{fileName:t,lineNumber:99,columnNumber:15},this)]},void 0,!0,{fileName:t,lineNumber:95,columnNumber:13},this)]},void 0,!0,{fileName:t,lineNumber:59,columnNumber:11},this)},void 0,!1,{fileName:t,lineNumber:58,columnNumber:9},this),r.exports.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:j.map(e=>{const s=e.spent/e.amount*100,a=b[e.category];return r.exports.jsxDEV(p,{children:[r.exports.jsxDEV("div",{className:"flex justify-between items-center mb-2",children:[r.exports.jsxDEV("span",{className:"font-medium",children:(a==null?void 0:a.name)||e.category},void 0,!1,{fileName:t,lineNumber:115,columnNumber:17},this),r.exports.jsxDEV("span",{className:"text-sm text-gray-500",children:e.period},void 0,!1,{fileName:t,lineNumber:118,columnNumber:17},this)]},void 0,!0,{fileName:t,lineNumber:114,columnNumber:15},this),r.exports.jsxDEV("div",{className:"text-2xl font-bold mb-2",children:["$",e.spent.toFixed(2)," / $",e.amount.toFixed(2)]},void 0,!0,{fileName:t,lineNumber:122,columnNumber:15},this),r.exports.jsxDEV(y,{percent:s,status:s>100?"error":"normal",formatText:()=>`${s.toFixed(1)}%`},void 0,!1,{fileName:t,lineNumber:125,columnNumber:15},this)]},e.id,!0,{fileName:t,lineNumber:113,columnNumber:13},this)})},void 0,!1,{fileName:t,lineNumber:107,columnNumber:7},this)]},void 0,!0,{fileName:t,lineNumber:47,columnNumber:5},this)}export{P as BudgetOverview};
