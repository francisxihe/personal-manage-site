import{j as e,a4 as E,B as N,Z as T,r as x,I as D,b8 as V}from"./index.295caa00.js";import{F as d,T as C}from"./index.6dcfb420.js";import{D as F,A as y}from"./index.43e76df7.js";import{useTodoDetailContext as v,TodoDetailProvider as S}from"./context.b0281150.js";import{a as h,I as A,U as k,S as R}from"./IconSelector.c2144de5.js";import{T as w}from"./api.b8516001.js";import"./startOfDay.a6eae802.js";import"./index.768e466f.js";import"./pad.b909f4f4.js";import"./b-tween.es.d368a2a1.js";import"./radio.d5ff39d6.js";import"./index.75d02bbe.js";var n="/Users/xuwenhua/code/project/home-manage/src/pages/todo/components/TodoDetail/Header.tsx";function B(){const{todoFormData:o,setTodoFormData:s,onClose:c}=v();return o?e.exports.jsxDEV(d,{direction:"vertical",className:"flex items-center px-1.5 text-text-3 border-b mb-2 !h-12",children:[e.exports.jsxDEV(d.Shrink,{className:"flex items-center",children:[e.exports.jsxDEV(F,{formData:{date:E(o.planDate),timeRange:o.planTimeRange,recurring:o.recurring},onChangeData:async a=>{s({...o,planDate:a.date.format("YYYY-MM-DD"),planTimeRange:a.timeRange,recurring:a.recurring})}},void 0,!1,{fileName:n,lineNumber:21,columnNumber:9},this),e.exports.jsxDEV(h,{map:A,iconName:"priority-0",value:o.importance,onChange:a=>{s(r=>({...r,importance:a}))}},void 0,!1,{fileName:n,lineNumber:42,columnNumber:9},this),e.exports.jsxDEV(h,{map:k,iconName:"urgency",value:o.urgency,onChange:a=>{s(r=>({...r,urgency:a}))}},void 0,!1,{fileName:n,lineNumber:50,columnNumber:9},this)]},void 0,!0,{fileName:n,lineNumber:20,columnNumber:7},this),e.exports.jsxDEV(d.Fixed,{className:"flex items-center",children:c?e.exports.jsxDEV(N,{type:"text",size:"small",icon:e.exports.jsxDEV(T,{className:"!text-text-3"},void 0,!1,{fileName:n,lineNumber:64,columnNumber:19},this),onClick:()=>c()},void 0,!1,{fileName:n,lineNumber:61,columnNumber:11},this):null},void 0,!1,{fileName:n,lineNumber:59,columnNumber:7},this)]},void 0,!0,{fileName:n,lineNumber:16,columnNumber:5},this):e.exports.jsxDEV(e.exports.Fragment,{},void 0,!1)}var t="/Users/xuwenhua/code/project/home-manage/src/pages/todo/components/TodoDetail/Main.tsx";const I=D.TextArea;function M(){const{todoFormData:o,todoNode:s,setTodoFormData:c,onChange:a,refreshTodoFormData:r}=v(),[l,b]=x.exports.useState(null),[g,p]=x.exports.useState(!1),j=x.exports.useCallback(i=>{b(i)},[b]),f=x.exports.useCallback(async()=>{var i,m;await w.addSubTodo(s.id,{name:l.name,importance:l.importance,urgency:l.urgency,planStartAt:((i=l.planTimeRange)==null?void 0:i[0])||void 0,planEndAt:((m=l.planTimeRange)==null?void 0:m[1])||void 0,tags:l.tags}),await r(s),p(!1)},[l,s,r]);return o?e.exports.jsxDEV(e.exports.Fragment,{children:[e.exports.jsxDEV(D,{value:o.name,placeholder:"\u51C6\u5907\u505A\u4EC0\u4E48?",type:"primary",size:"small",className:"!text-text-1 !bg-transparent !border-none mb-1",onChange:i=>{c(m=>({...m,name:i}))},onBlur:()=>{a(o)}},void 0,!1,{fileName:t,lineNumber:48,columnNumber:7},this),e.exports.jsxDEV(I,{autoSize:!1,value:o.description,placeholder:"\u63CF\u8FF0\u4E00\u4E0B",className:"!text-text-3 !text-body-1 !bg-transparent !border-none mb-1",onChange:i=>{c(m=>({...m,description:i}))}},void 0,!1,{fileName:t,lineNumber:61,columnNumber:7},this),e.exports.jsxDEV("div",{children:e.exports.jsxDEV(C,{todoList:s.subTodoList,onClickTodo:async i=>{await r(i)},refreshTodoList:async()=>{await r(s)}},void 0,!1,{fileName:t,lineNumber:74,columnNumber:9},this)},void 0,!1,{fileName:t,lineNumber:73,columnNumber:7},this),e.exports.jsxDEV(V,{popupVisible:g,trigger:"click",className:"w-80",content:e.exports.jsxDEV("div",{children:[e.exports.jsxDEV(y,{hiddenDate:!0,onChange:j,onSubmit:f},void 0,!1,{fileName:t,lineNumber:90,columnNumber:13},this),e.exports.jsxDEV("div",{className:"flex items-center justify-end mt-2",children:[e.exports.jsxDEV(N,{type:"text",size:"small",status:"default",onClick:()=>{p(!1)},children:"\u53D6\u6D88"},void 0,!1,{fileName:t,lineNumber:96,columnNumber:15},this),e.exports.jsxDEV(N,{type:"text",size:"small",onClick:f,children:"\u6DFB\u52A0"},void 0,!1,{fileName:t,lineNumber:106,columnNumber:15},this)]},void 0,!0,{fileName:t,lineNumber:95,columnNumber:13},this)]},void 0,!0,{fileName:t,lineNumber:89,columnNumber:11},this),children:e.exports.jsxDEV(N,{type:"text",size:"small",onClick:()=>{p(!0)},children:e.exports.jsxDEV("div",{className:"flex items-center gap-1",children:[e.exports.jsxDEV(R,{id:"add"},void 0,!1,{fileName:t,lineNumber:121,columnNumber:13},this),"\u6DFB\u52A0\u5B50\u5F85\u529E"]},void 0,!0,{fileName:t,lineNumber:120,columnNumber:11},this)},void 0,!1,{fileName:t,lineNumber:113,columnNumber:9},this)},void 0,!1,{fileName:t,lineNumber:84,columnNumber:7},this)]},void 0,!0):e.exports.jsxDEV(e.exports.Fragment,{},void 0,!1)}var u="/Users/xuwenhua/code/project/home-manage/src/pages/todo/components/TodoDetail/index.tsx";function J(o){return e.exports.jsxDEV(S,{todo:o.todo,onClose:o.onClose,onChange:o.onChange,children:e.exports.jsxDEV(d,{children:[e.exports.jsxDEV(d.Fixed,{children:e.exports.jsxDEV(B,{},void 0,!1,{fileName:u,lineNumber:20,columnNumber:11},this)},void 0,!1,{fileName:u,lineNumber:19,columnNumber:9},this),e.exports.jsxDEV(d.Shrink,{children:e.exports.jsxDEV(M,{},void 0,!1,{fileName:u,lineNumber:23,columnNumber:11},this)},void 0,!1,{fileName:u,lineNumber:22,columnNumber:9},this)]},void 0,!0,{fileName:u,lineNumber:18,columnNumber:7},this)},void 0,!1,{fileName:u,lineNumber:13,columnNumber:5},this)}export{J as default};
