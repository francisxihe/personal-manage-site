import{r,j as T}from"./index.295caa00.js";var D="/Users/xuwenhua/code/project/home-manage/src/pages/expenses/context/expenses-context.tsx";const w=r.exports.createContext(void 0);function j({children:c}){const[i,l]=r.exports.useState([]),[x,p]=r.exports.useState([]),[o,E]=r.exports.useState({dateRange:{from:void 0,to:void 0},categories:[],tags:[],period:"all"}),m=r.exports.useCallback(t=>{l(s=>[...s,{...t,id:Date.now()}])},[]),f=r.exports.useCallback((t,s)=>{l(a=>a.map(u=>u.id===t?{...u,...s}:u))},[]),g=r.exports.useCallback(t=>{l(s=>s.filter(a=>a.id!==t))},[]),v=r.exports.useCallback(t=>{p(s=>[...s,{...t,id:Date.now(),spent:0}])},[]),C=r.exports.useCallback((t,s)=>{p(a=>a.map(u=>u.id===t?{...u,...s}:u))},[]),y=r.exports.useCallback(t=>{p(s=>s.filter(a=>a.id!==t))},[]),b=r.exports.useMemo(()=>{const t=i.filter(e=>{if(o.dateRange.from&&o.dateRange.to){const n=new Date(e.date);if(n<o.dateRange.from||n>o.dateRange.to)return!1}return!(o.type&&e.type!==o.type||o.categories.length>0&&!o.categories.includes(e.category)||o.tags.length>0&&!o.tags.some(n=>e.tags.includes(n)))}),s=t.filter(e=>e.type==="income").reduce((e,n)=>e+n.amount,0),a=t.filter(e=>e.type==="expense").reduce((e,n)=>e+n.amount,0),u=t.reduce((e,n)=>(e[n.category]=(e[n.category]||0)+n.amount,e),{}),h=s-a,d=0;return{totalIncome:s,totalExpenses:a,netAmount:s-a,categoryBreakdown:u,periodComparison:{current:h,previous:d,change:d?(h-d)/d*100:0}}},[i,o]),k=r.exports.useMemo(()=>({transactions:i,budgets:x,filters:o,stats:b,addTransaction:m,updateTransaction:f,deleteTransaction:g,addBudget:v,updateBudget:C,deleteBudget:y,setFilters:E}),[i,x,o,b,m,f,g,v,C,y]);return T.exports.jsxDEV(w.Provider,{value:k,children:c},void 0,!1,{fileName:D,lineNumber:179,columnNumber:5},this)}function B(){const c=r.exports.useContext(w);if(c===void 0)throw new Error("useExpenses must be used within an ExpensesProvider");return c}export{j as ExpensesProvider,B as useExpenses};
