import{r as a,j as t,aG as j,a4 as T,bb as L}from"./index.295caa00.js";import{C as n}from"./index.8dc5884a.js";import{F as p,T as u}from"./index.6dcfb420.js";import{A as k}from"./index.43e76df7.js";import V from"./index.51bf1366.js";import{T as r}from"./api.b8516001.js";import"./IconSelector.c2144de5.js";import"./startOfDay.a6eae802.js";import"./index.768e466f.js";import"./pad.b909f4f4.js";import"./b-tween.es.d368a2a1.js";import"./radio.d5ff39d6.js";import"./index.75d02bbe.js";import"./context.b0281150.js";var S={"custom-collapse":"_custom-collapse_10ees_1"},o="/Users/xuwenhua/code/project/home-manage/src/pages/todo/todo-week/index.tsx";const c=T().startOf("week").format("YYYY-MM-DD"),f=T().endOf("week").format("YYYY-MM-DD");function $(){const[x,v]=a.exports.useState([]),[N,w]=a.exports.useState([]),[b,y]=a.exports.useState([]),[h,E]=a.exports.useState([]);async function s(){const e=await r.getTodoList({status:"todo",planDateStart:c,planDateEnd:f});v(e);const d=await r.getTodoList({status:"done",doneDateStart:c,doneDateEnd:f});w(d);const m=await r.getTodoList({status:"todo",planDateEnd:c});y(m);const g=await r.getTodoList({status:"abandoned",abandonedDateStart:c,abandonedDateEnd:f});E(g),l&&i(l)}a.exports.useEffect(()=>{s()},[]);const[l,D]=a.exports.useState(null);async function i(e){L.exports.flushSync(()=>{D(null)}),D(e)}return t.exports.jsxDEV(p,{className:"bg-bg-2 rounded-lg w-full h-full",children:[t.exports.jsxDEV(p.Fixed,{className:"px-5 py-2 flex justify-between items-center border-b",children:t.exports.jsxDEV("div",{className:"text-text-1 text-title-2 font-[500] py-1",children:"\u672C\u5468\u5F85\u529E"},void 0,!1,{fileName:o,lineNumber:73,columnNumber:9},this)},void 0,!1,{fileName:o,lineNumber:72,columnNumber:7},this),t.exports.jsxDEV(p.Shrink,{className:"px-5 w-full h-full flex",children:[t.exports.jsxDEV("div",{className:"w-full py-2",children:[t.exports.jsxDEV(k,{onSubmit:async e=>{var d,m;await r.addTodo({name:e.name,importance:e.importance,urgency:e.urgency,planDate:e.planDate||void 0,planStartAt:((d=e.planTimeRange)==null?void 0:d[0])||void 0,planEndAt:((m=e.planTimeRange)==null?void 0:m[1])||void 0,recurring:e.recurring,tags:e.tags}),s()}},void 0,!1,{fileName:o,lineNumber:78,columnNumber:11},this),t.exports.jsxDEV(n,{defaultActiveKey:["expired","week"],className:`${S["custom-collapse"]} mt-2`,bordered:!1,children:[b.length>0&&t.exports.jsxDEV(n.Item,{header:"\u5DF2\u8FC7\u671F",name:"expired",contentStyle:{padding:0},children:t.exports.jsxDEV(u,{todoList:b,onClickTodo:async e=>{await i(e)},refreshTodoList:async()=>{await s()}},void 0,!1,{fileName:o,lineNumber:104,columnNumber:17},this)},void 0,!1,{fileName:o,lineNumber:99,columnNumber:15},this),x.length>0&&t.exports.jsxDEV(n.Item,{header:"\u672C\u5468",name:"week",contentStyle:{padding:0},children:t.exports.jsxDEV(u,{todoList:x,onClickTodo:async e=>{await i(e)},refreshTodoList:async()=>{await s()}},void 0,!1,{fileName:o,lineNumber:121,columnNumber:17},this)},void 0,!1,{fileName:o,lineNumber:116,columnNumber:15},this),N.length>0&&t.exports.jsxDEV(n.Item,{header:"\u5DF2\u5B8C\u6210",name:"done",contentStyle:{padding:0},children:t.exports.jsxDEV(u,{todoList:N,onClickTodo:async e=>{await i(e)},refreshTodoList:async()=>{await s()}},void 0,!1,{fileName:o,lineNumber:138,columnNumber:17},this)},void 0,!1,{fileName:o,lineNumber:133,columnNumber:15},this),h.length>0&&t.exports.jsxDEV(n.Item,{header:"\u5DF2\u653E\u5F03",name:"abandoned",contentStyle:{padding:0},children:t.exports.jsxDEV(u,{todoList:h,onClickTodo:async e=>{await i(e)},refreshTodoList:async()=>{await s()}},void 0,!1,{fileName:o,lineNumber:155,columnNumber:17},this)},void 0,!1,{fileName:o,lineNumber:150,columnNumber:15},this)]},void 0,!0,{fileName:o,lineNumber:93,columnNumber:11},this)]},void 0,!0,{fileName:o,lineNumber:77,columnNumber:9},this),l&&t.exports.jsxDEV(t.exports.Fragment,{children:[t.exports.jsxDEV(j,{type:"vertical",className:"!h-full"},void 0,!1,{fileName:o,lineNumber:170,columnNumber:13},this)," ",t.exports.jsxDEV("div",{className:"w-full py-2",children:t.exports.jsxDEV(V,{todo:l,onClose:async()=>{i(null)},onChange:async e=>{s()}},void 0,!1,{fileName:o,lineNumber:172,columnNumber:15},this)},void 0,!1,{fileName:o,lineNumber:171,columnNumber:13},this)]},void 0,!0)]},void 0,!0,{fileName:o,lineNumber:76,columnNumber:7},this)]},void 0,!0,{fileName:o,lineNumber:71,columnNumber:5},this)}export{$ as default};
