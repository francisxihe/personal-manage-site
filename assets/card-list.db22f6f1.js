import{u as D,r as u,j as e,Y as y,al as j,H as E,af as V,aj as _}from"./index.295caa00.js";import{S as g}from"./index.df914e5e.js";import{C}from"./index.d0e2df9e.js";import{S}from"./index.8ec38198.js";import{C as p,L as T,T as x,I as w}from"./index.216649d8.js";import{l as k}from"./index.b0c339fc.js";import{I,a as L}from"./index.2d4052ff.js";import{I as F}from"./index.81821f26.js";import"./b-tween.es.d368a2a1.js";import"./pad.b909f4f4.js";import"./index.938847eb.js";const R="_card_82vdc_1",A="_statistic_82vdc_1",G="_title_82vdc_4",P="_diff_82vdc_16",$="_tooltip_82vdc_24";var l={card:R,statistic:A,title:G,diff:P,"diff-increment":"_diff-increment_82vdc_21",tooltip:$},t="/Users/xuwenhua/code/project/home-manage/src/pages/visualization/multi-dimension-data-analysis/card-list.tsx";const{Row:q,Col:z}=y,{Title:B,Text:H}=_,h={pure:!0,autoFit:!0,height:80,padding:[0,10,0,10]};function b(s){const{items:r}=s;return e.exports.jsxDEV("div",{className:l.tooltip,children:r.map((a,o)=>e.exports.jsxDEV("div",{children:e.exports.jsxDEV(H,{bold:!0,children:Number(a.data.y).toLocaleString()},void 0,!1,{fileName:t,lineNumber:45,columnNumber:11},this)},o,!1,{fileName:t,lineNumber:44,columnNumber:9},this))},void 0,!1,{fileName:t,lineNumber:42,columnNumber:5},this)}function M(s){const{chartData:r}=s;return e.exports.jsxDEV(p,{data:r,...h,children:[e.exports.jsxDEV(T,{position:"x*y",shape:["name",["smooth","dash"]],color:["name",["#165DFF","rgba(106,161,255,0.3)"]]},void 0,!1,{fileName:t,lineNumber:55,columnNumber:7},this),e.exports.jsxDEV(x,{shared:!1,showCrosshairs:!0,children:(a,o)=>e.exports.jsxDEV(b,{items:o},void 0,!1,{fileName:t,lineNumber:61,columnNumber:24},this)},void 0,!1,{fileName:t,lineNumber:60,columnNumber:7},this)]},void 0,!0,{fileName:t,lineNumber:54,columnNumber:5},this)}function U(s){const{chartData:r}=s;return e.exports.jsxDEV(p,{data:r,...h,children:[e.exports.jsxDEV(w,{position:"x*y",color:["x",a=>Number(a)%2===0?"#86DF6C":"#468DFF"]},void 0,!1,{fileName:t,lineNumber:71,columnNumber:7},this),e.exports.jsxDEV(x,{shared:!1,children:(a,o)=>e.exports.jsxDEV(b,{items:o},void 0,!1,{fileName:t,lineNumber:84,columnNumber:24},this)},void 0,!1,{fileName:t,lineNumber:83,columnNumber:7},this),e.exports.jsxDEV(F,{type:"active-region"},void 0,!1,{fileName:t,lineNumber:86,columnNumber:7},this)]},void 0,!0,{fileName:t,lineNumber:70,columnNumber:5},this)}function Y(s){const{chartType:r,title:a,count:o,increment:n,diff:c,chartData:m,loading:i}=s;return e.exports.jsxDEV(C,{className:l.card,children:[e.exports.jsxDEV("div",{className:l.statistic,children:e.exports.jsxDEV(S,{title:e.exports.jsxDEV(B,{heading:6,className:l.title,children:a},void 0,!1,{fileName:t,lineNumber:100,columnNumber:13},this),loading:i,value:o,extra:e.exports.jsxDEV("div",{className:l["compare-yesterday"],children:i?e.exports.jsxDEV(g,{text:{rows:1},style:{width:"100px"},animation:!0},void 0,!1,{fileName:t,lineNumber:109,columnNumber:17},this):e.exports.jsxDEV("span",{className:j(l.diff,{[l["diff-increment"]]:n}),children:[c,n?e.exports.jsxDEV(I,{},void 0,!1,{fileName:t,lineNumber:121,columnNumber:32},this):e.exports.jsxDEV(L,{},void 0,!1,{fileName:t,lineNumber:121,columnNumber:52},this)]},void 0,!0,{fileName:t,lineNumber:115,columnNumber:17},this)},void 0,!1,{fileName:t,lineNumber:107,columnNumber:13},this),groupSeparator:!0},void 0,!1,{fileName:t,lineNumber:98,columnNumber:9},this)},void 0,!1,{fileName:t,lineNumber:97,columnNumber:7},this),e.exports.jsxDEV("div",{className:l.chart,children:e.exports.jsxDEV(E,{style:{width:"100%"},loading:i,children:[r==="interval"&&e.exports.jsxDEV(U,{chartData:m},void 0,!1,{fileName:t,lineNumber:131,columnNumber:40},this),r==="line"&&e.exports.jsxDEV(M,{chartData:m},void 0,!1,{fileName:t,lineNumber:132,columnNumber:36},this)]},void 0,!0,{fileName:t,lineNumber:130,columnNumber:9},this)},void 0,!1,{fileName:t,lineNumber:129,columnNumber:7},this)]},void 0,!0,{fileName:t,lineNumber:96,columnNumber:5},this)}const f=[{key:"userRetentionTrend",type:"line"},{key:"userRetention",type:"interval"},{key:"contentConsumptionTrend",type:"line"},{key:"contentConsumption",type:"interval"}];function re(){const s=D(k),[r,a]=u.exports.useState(!1),[o,n]=u.exports.useState(f.map(i=>({...i,chartType:i.type}))),c=async()=>{const i=f.map(async N=>{const{data:v}=await V.get(`/api/multi-dimension/card?type=${N.type}`).catch(()=>({data:{}}));return{...v,key:N.key,chartType:N.type}});a(!0);const d=await Promise.all(i).finally(()=>a(!1));n(d)};u.exports.useEffect(()=>{c()},[]);const m=u.exports.useMemo(()=>o.map(i=>({...i,title:s[`multiDAnalysis.cardList.${i.key}`]})),[s,o]);return e.exports.jsxDEV(q,{gutter:16,children:m.map((i,d)=>e.exports.jsxDEV(z,{span:6,children:e.exports.jsxDEV(Y,{...i,loading:r},void 0,!1,{fileName:t,lineNumber:201,columnNumber:11},this)},d,!1,{fileName:t,lineNumber:200,columnNumber:9},this))},void 0,!1,{fileName:t,lineNumber:198,columnNumber:5},this)}export{re as default};
